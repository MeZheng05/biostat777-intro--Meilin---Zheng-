{"title":"Example Analysis","markdown":{"yaml":{"title":"Example Analysis","bibliography":"references.bib"},"headingText":"**What is the question?**","containsRefs":false,"markdown":"\n\n::: callout-note\nNote that this is only a simple data analysis. This is only an illustration on wrangling, exploring the data using different packages in R (e.g. `tidyr`, `ggplot2`) and show the process and results on a quarto website. No complex model is being built.\n:::\n\n\n![Souce[@Zhao2021]](housing.webp){fig-align=\"center\" width=\"720\"}\n\n::: {#about-block}\nCalifornia housing price is always a hot topic. In this analysis example, the main question is to investigate what factors are associated with California housing price.\n:::\n\n# **Who is the intended audience?**\n\n<div>\n\nThe main audience is general public who are interested in the housing market back in time in 1990.\n\n</div>\n\n# **Link to where the data come from**\n\n<div>\n\nThis housing data comes from a California census in 1990. The data was first featured in the paper @PaceandBarry1997. \n\nThe version of the data being used in this analysis is a modified version on Kaggle.\n\nPlease click on the [link](https://www.kaggle.com/datasets/camnugent/california-housing-prices/data) for the source of the data.\n\n</div>\n\n# **Data dictionary**\n\n<div>\n\nThe data dictionary below was selected from the Kaggle Website. Please click on this [link](https://www.kaggle.com/datasets/camnugent/california-housing-prices/data) for reference.\n\n`longitude` : A measure of how far west a house is; a higher value is farther west\n\n`latitude`: A measure of how far north a house is; a higher value is farther north\n\n`age`: Median age of a house within a block; a lower number is a newer building\n\n`rooms`: Total number of rooms within a block\n\n`beds`: Total number of bedrooms within a block\n\n`pop`: Total number of people residing within a block\n\n`households`: Total number of households, a group of people residing within a home unit, for a block.\n\n`income`: Median income for households within a block of houses (measured in tens of thousands of US Dollars)\n\n`value`: Median house value for households within a block (measured in tens of thousands of US Dollars)\n\n`ocean`: Location of the house w.r.t ocean/sea\n\n</div>\n\n# **Data cleaning and Wrangling**\n\n<div>\n\n```{r, warning=FALSE, message=FALSE}\ndata <- read.csv(\"housing.csv\")\nlibrary(dplyr)\nlibrary(tidyr)\n```\n\n</div>\n\n```{r}\n#| column: margin\n# Structure of the original dataset\nstr(data)\n```\n\n```{r}\nlibrary(forcats)\n#renames variables\ncolnames(data) <- c(\"logitude\", \"latitude\", \"age\", \"rooms\", \"beds\", \"pop\", \"households\", \"income\", \"value\", \"ocean\")\n\ndata %>% group_by(ocean) %>% summarise(count = n())\n#Since we only have 5 observations for island, I excluded these 5 observations\ndata <- data %>% filter(ocean != \"ISLAND\")\n#make ocean as a factor\ndata <- data %>% mutate(ocean = as.factor(ocean))\n\n#Omit NAs if there is any\n#unique(is.na(data))\ndata <- data %>% drop_na()\n#create a factor for income\ndata <- data %>% mutate(\n  income_fct = case_when(\n    income < 2 ~ 'below_20K',\n    income >= 2 & income <= 5 ~ 'between_20K_50K',\n    income > 5 & income <= 7.5 ~ 'between_50K_75K',\n    income > 7.5 & income <= 10 ~ 'between_75K_100K',\n    income >= 10 ~ 'above 100K'\n  ),\n  income_fct = factor(income_fct, levels = c('below_20K', 'between_20K_50K', 'between_50K_75K', 'between_75K_100K', 'above 100K')), \n  ocean = fct_collapse(ocean, ocean_view = c('<1H OCEAN', \"NEAR BAY\", \"NEAR OCEAN\"), inland = c(\"INLAND\")),\n  value = value/10000\n)\n```\n\n```{r}\n#| column: margin\n#Structure of data after data wranggling\nstr(data)\n```\n\n# Exploration of Associations\n\n<div>\n\n```{r, warning=FALSE, message=FALSE}\nlibrary(ggplot2)\np1 <- ggplot(data) + geom_line(aes(x = latitude, y = value), alpha = 0.8, color = \"darkolivegreen1\") + theme_bw() + labs(title = \"Housing Value by Latitude in California\\n, 1990\")\np2 <- ggplot(data) + geom_point(aes(x = age, y = value), alpha = 0.4, color = \"brown1\") + theme_bw() + labs(title = \"Housing Value by Housing age in\\nCalifornia, 1990\")\np3 <- ggplot(data) + geom_point(aes(x = beds, y = value), alpha = 0.8, color = \"darkorange\") + theme_bw() + labs(title = \"Housing Value by Number of Bedrooms\\nin California, 1990\")\np4 <- ggplot(data) + geom_point(aes(x = pop, y = value), alpha = 0.8, color = \"cornflowerblue\") + theme_bw() + labs(title = \"Housing Value by Population in\\nCalifornia, 1990\")\np5 <- ggplot(data) + geom_line(aes(x = income, y = value), alpha = 0.8, color = \"cadetblue1\") + theme_bw() + labs(title = \"Housing Value by Median Household\\nIncome in California, 1990\")\np6 <- ggplot(data) + geom_violin(aes(x = ocean, y = value), color = \"darkolivegreen4\", fill = \"darkolivegreen\") + theme_bw() + labs(title = \"Housing Value by Location to Ocean\\nin California, 1990\")\nlibrary(ggpubr)\nggarrange(p1, p2, ncol = 2)\nggarrange(p3, p4, ncol = 2)\nggarrange(p5, p6, ncol = 2)\n```\n\n::: callout-tip\nHousing value is shown to be positively correlated with median household income. Also, there might be a slightly negative association between latitude and housing value. Moreover, the housing value located in inland clearly has a lower value than housings which is close to or have an ocean/bay view.\n:::\n\n# More on Exploration of Associations\n\n<div>\n\n```{r}\np <- ggplot(data) + geom_line(aes(y = value, x = income),color = \"violet\") + facet_wrap(.~ocean, ncol=2) + labs(title = \"Value of House (in 10K) VS. Median Household Income (in 10K)\\nby Location of the House\", y = \"Value of House (in 10K)\", x = 'Median Household Income (in 10K)', subtitle = \"The value of the house is highly positively associated with income, and house that has a ocean/bay\\nview is slightly more valuable than house in inland.\", caption = \"Meilin Zheng\") + theme_bw()\np\n```\n\n```{r, message=FALSE, fig.width=9, fig.height=10}\nggplot(data) + geom_point(aes(x = age, y = value, color = income_fct), alpha = 0.1) + geom_smooth(aes(x = age, y = value), method = lm) + facet_wrap(.~income_fct, ncol=2) + theme(panel.background = element_rect(fill = \"white\"), panel.grid.major = element_line(colour = \"lightgrey\"), plot.title = element_text(size = 18)) + labs(title = \"Housing Value by the Age of House, by Different Income Level\", caption=\"Meilin Zheng\", subtitle = \"Housing Value is more strongly related to housing age for subgroups which have median household\\nincome between 50K and 75K and 75K to 100K.For neighborhood with median household income greater\\nthan 100K, the age of the house does not seem to have impact on the value of the house.\") \n```\n\n</div>\n\n\n# Linear Regression Model \n\nThe idea of building a regression model comes from @Li2022. The model from @Li2022 is used to do prediction, which is much more complex. The model built below is only a toy example, and the model assumptions needs to be checked. \n\n:::{#about-block}\n```{r}\nmodel <- lm(value ~ income + age + ocean, data)\nsummary(model)\n```\n:::\n\n\n\n# Summary\n\n<div>\nIn summary, through data visualization and building a simple linear regression, we explored a couple of possible factors that influence the housing price in California. For example, neighborhood median housing income is highly associated with housing price. The higher the income, the higher the housing value. This is similar to the conclusion reported by @Cohen2017 that GDP largely influence the housing price. Ocean view is another important factor that influences the housing value in California. For houses that are close to the ocean view or have a bay/ocean view, the housing price is much higher ($768836 higher on average) than the houses in inland. Interestingly, age does not influence the housing price conditioning on the subgroup with income greater than 100K. These three factors are also statistically significant. \n\nThe data is from year 1990, so it might not be able to predict the current housing price well. However, it still serves as a purpose to inform people about what are the important factors that influence housing price. \n\n</div>\n\n::: {.column-margin}\nThe Fitted Regression Model (baseline: houses with/near ocean/bay view)\n\n$$\\widehat{\\text{value}} = 5.5579 + 3.81423*income + 0.09789*\\text{age} - 7.68836*\\text{I}(\\text{ocean = inland})$$\n:::\n\n::: callout-note\nThe functions being used in this analysis example is written below:\n\n`dplyr`: `group_by()`, `summarise()`, `mutate()`, `filter()`, `is.na()`, `case_when()`.\n\n`tidyr`: `drop_na()`.\n\n`ggplot2`: `geom_point()`, `geom_line()`, `geom_violin()`, `geom_histogram()`, `geom_smooth()`, `facet_wrap()`, `theme()`, `labs()`...\n:::\n","srcMarkdownNoYaml":"\n\n::: callout-note\nNote that this is only a simple data analysis. This is only an illustration on wrangling, exploring the data using different packages in R (e.g. `tidyr`, `ggplot2`) and show the process and results on a quarto website. No complex model is being built.\n:::\n\n# **What is the question?**\n\n![Souce[@Zhao2021]](housing.webp){fig-align=\"center\" width=\"720\"}\n\n::: {#about-block}\nCalifornia housing price is always a hot topic. In this analysis example, the main question is to investigate what factors are associated with California housing price.\n:::\n\n# **Who is the intended audience?**\n\n<div>\n\nThe main audience is general public who are interested in the housing market back in time in 1990.\n\n</div>\n\n# **Link to where the data come from**\n\n<div>\n\nThis housing data comes from a California census in 1990. The data was first featured in the paper @PaceandBarry1997. \n\nThe version of the data being used in this analysis is a modified version on Kaggle.\n\nPlease click on the [link](https://www.kaggle.com/datasets/camnugent/california-housing-prices/data) for the source of the data.\n\n</div>\n\n# **Data dictionary**\n\n<div>\n\nThe data dictionary below was selected from the Kaggle Website. Please click on this [link](https://www.kaggle.com/datasets/camnugent/california-housing-prices/data) for reference.\n\n`longitude` : A measure of how far west a house is; a higher value is farther west\n\n`latitude`: A measure of how far north a house is; a higher value is farther north\n\n`age`: Median age of a house within a block; a lower number is a newer building\n\n`rooms`: Total number of rooms within a block\n\n`beds`: Total number of bedrooms within a block\n\n`pop`: Total number of people residing within a block\n\n`households`: Total number of households, a group of people residing within a home unit, for a block.\n\n`income`: Median income for households within a block of houses (measured in tens of thousands of US Dollars)\n\n`value`: Median house value for households within a block (measured in tens of thousands of US Dollars)\n\n`ocean`: Location of the house w.r.t ocean/sea\n\n</div>\n\n# **Data cleaning and Wrangling**\n\n<div>\n\n```{r, warning=FALSE, message=FALSE}\ndata <- read.csv(\"housing.csv\")\nlibrary(dplyr)\nlibrary(tidyr)\n```\n\n</div>\n\n```{r}\n#| column: margin\n# Structure of the original dataset\nstr(data)\n```\n\n```{r}\nlibrary(forcats)\n#renames variables\ncolnames(data) <- c(\"logitude\", \"latitude\", \"age\", \"rooms\", \"beds\", \"pop\", \"households\", \"income\", \"value\", \"ocean\")\n\ndata %>% group_by(ocean) %>% summarise(count = n())\n#Since we only have 5 observations for island, I excluded these 5 observations\ndata <- data %>% filter(ocean != \"ISLAND\")\n#make ocean as a factor\ndata <- data %>% mutate(ocean = as.factor(ocean))\n\n#Omit NAs if there is any\n#unique(is.na(data))\ndata <- data %>% drop_na()\n#create a factor for income\ndata <- data %>% mutate(\n  income_fct = case_when(\n    income < 2 ~ 'below_20K',\n    income >= 2 & income <= 5 ~ 'between_20K_50K',\n    income > 5 & income <= 7.5 ~ 'between_50K_75K',\n    income > 7.5 & income <= 10 ~ 'between_75K_100K',\n    income >= 10 ~ 'above 100K'\n  ),\n  income_fct = factor(income_fct, levels = c('below_20K', 'between_20K_50K', 'between_50K_75K', 'between_75K_100K', 'above 100K')), \n  ocean = fct_collapse(ocean, ocean_view = c('<1H OCEAN', \"NEAR BAY\", \"NEAR OCEAN\"), inland = c(\"INLAND\")),\n  value = value/10000\n)\n```\n\n```{r}\n#| column: margin\n#Structure of data after data wranggling\nstr(data)\n```\n\n# Exploration of Associations\n\n<div>\n\n```{r, warning=FALSE, message=FALSE}\nlibrary(ggplot2)\np1 <- ggplot(data) + geom_line(aes(x = latitude, y = value), alpha = 0.8, color = \"darkolivegreen1\") + theme_bw() + labs(title = \"Housing Value by Latitude in California\\n, 1990\")\np2 <- ggplot(data) + geom_point(aes(x = age, y = value), alpha = 0.4, color = \"brown1\") + theme_bw() + labs(title = \"Housing Value by Housing age in\\nCalifornia, 1990\")\np3 <- ggplot(data) + geom_point(aes(x = beds, y = value), alpha = 0.8, color = \"darkorange\") + theme_bw() + labs(title = \"Housing Value by Number of Bedrooms\\nin California, 1990\")\np4 <- ggplot(data) + geom_point(aes(x = pop, y = value), alpha = 0.8, color = \"cornflowerblue\") + theme_bw() + labs(title = \"Housing Value by Population in\\nCalifornia, 1990\")\np5 <- ggplot(data) + geom_line(aes(x = income, y = value), alpha = 0.8, color = \"cadetblue1\") + theme_bw() + labs(title = \"Housing Value by Median Household\\nIncome in California, 1990\")\np6 <- ggplot(data) + geom_violin(aes(x = ocean, y = value), color = \"darkolivegreen4\", fill = \"darkolivegreen\") + theme_bw() + labs(title = \"Housing Value by Location to Ocean\\nin California, 1990\")\nlibrary(ggpubr)\nggarrange(p1, p2, ncol = 2)\nggarrange(p3, p4, ncol = 2)\nggarrange(p5, p6, ncol = 2)\n```\n\n::: callout-tip\nHousing value is shown to be positively correlated with median household income. Also, there might be a slightly negative association between latitude and housing value. Moreover, the housing value located in inland clearly has a lower value than housings which is close to or have an ocean/bay view.\n:::\n\n# More on Exploration of Associations\n\n<div>\n\n```{r}\np <- ggplot(data) + geom_line(aes(y = value, x = income),color = \"violet\") + facet_wrap(.~ocean, ncol=2) + labs(title = \"Value of House (in 10K) VS. Median Household Income (in 10K)\\nby Location of the House\", y = \"Value of House (in 10K)\", x = 'Median Household Income (in 10K)', subtitle = \"The value of the house is highly positively associated with income, and house that has a ocean/bay\\nview is slightly more valuable than house in inland.\", caption = \"Meilin Zheng\") + theme_bw()\np\n```\n\n```{r, message=FALSE, fig.width=9, fig.height=10}\nggplot(data) + geom_point(aes(x = age, y = value, color = income_fct), alpha = 0.1) + geom_smooth(aes(x = age, y = value), method = lm) + facet_wrap(.~income_fct, ncol=2) + theme(panel.background = element_rect(fill = \"white\"), panel.grid.major = element_line(colour = \"lightgrey\"), plot.title = element_text(size = 18)) + labs(title = \"Housing Value by the Age of House, by Different Income Level\", caption=\"Meilin Zheng\", subtitle = \"Housing Value is more strongly related to housing age for subgroups which have median household\\nincome between 50K and 75K and 75K to 100K.For neighborhood with median household income greater\\nthan 100K, the age of the house does not seem to have impact on the value of the house.\") \n```\n\n</div>\n\n\n# Linear Regression Model \n\nThe idea of building a regression model comes from @Li2022. The model from @Li2022 is used to do prediction, which is much more complex. The model built below is only a toy example, and the model assumptions needs to be checked. \n\n:::{#about-block}\n```{r}\nmodel <- lm(value ~ income + age + ocean, data)\nsummary(model)\n```\n:::\n\n\n\n# Summary\n\n<div>\nIn summary, through data visualization and building a simple linear regression, we explored a couple of possible factors that influence the housing price in California. For example, neighborhood median housing income is highly associated with housing price. The higher the income, the higher the housing value. This is similar to the conclusion reported by @Cohen2017 that GDP largely influence the housing price. Ocean view is another important factor that influences the housing value in California. For houses that are close to the ocean view or have a bay/ocean view, the housing price is much higher ($768836 higher on average) than the houses in inland. Interestingly, age does not influence the housing price conditioning on the subgroup with income greater than 100K. These three factors are also statistically significant. \n\nThe data is from year 1990, so it might not be able to predict the current housing price well. However, it still serves as a purpose to inform people about what are the important factors that influence housing price. \n\n</div>\n\n::: {.column-margin}\nThe Fitted Regression Model (baseline: houses with/near ocean/bay view)\n\n$$\\widehat{\\text{value}} = 5.5579 + 3.81423*income + 0.09789*\\text{age} - 7.68836*\\text{I}(\\text{ocean = inland})$$\n:::\n\n::: callout-note\nThe functions being used in this analysis example is written below:\n\n`dplyr`: `group_by()`, `summarise()`, `mutate()`, `filter()`, `is.na()`, `case_when()`.\n\n`tidyr`: `drop_na()`.\n\n`ggplot2`: `geom_point()`, `geom_line()`, `geom_violin()`, `geom_histogram()`, `geom_smooth()`, `facet_wrap()`, `theme()`, `labs()`...\n:::\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"data_analysis.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.433","editor":"visual","theme":"cosmo","title":"Example Analysis","bibliography":["references.bib"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}